name: "Extrair-Nomeados-TRF3-Completo"

on:
  workflow_dispatch: # Permite rodar manualmente clicando no botão

jobs:
  busca_detalhada:
    runs-on: ubuntu-latest
    steps:
      - name: "Checkout do Repositório"
        uses: actions/checkout@v4

      - name: "Instalar Dependências"
        run: |
          pip install -r requirements.txt

      - name: "Executar Robô de Extração TRF3"
        # O comando abaixo realiza a busca real nos PDFs da Seção 2
        run: |
          python main.py \
          --inicio 2024-12-01 \
          --fim 2026-02-19 \
          --secao 2 \
          --orgao "TRIBUNAL REGIONAL FEDERAL DA 3ª REGIAO|TRF3|SJMS|SJSP|JUSTIÇA FEDERAL" \
          --busca "nomear|nomeação|Analista Judiciário|Técnico Judiciário|Polícia Judiciária"

      - name: "Compilar Relatório (Ato, Cargo, Local e Data)"
        if: success()
        run: |
          echo "LISTA DE NOMEADOS ENCONTRADOS:"
          echo "------------------------------------------------------------------"
          echo "Formato: [DATA] | [ATO Nº] | [NOME] | [CARGO/ESPECIALIDADE] | [LOCAL]"
          # O robô imprimirá os resultados abaixo desta linha no log
